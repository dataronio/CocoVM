<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Basic VM</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>

        <textarea id='prog' style='height: auto;'>
AEQ 1
STA 0
STA 1
AEQ 0
STA 3d
LDA 0
OUT
STA 2d
ADD 1
STA 0
LDA 2d
STA 1
LDA 3d
CMP 10d
INC 3d
JNEQ 5d
HLT
        </textarea></br>

        <textarea id='binary'></textarea></br>

        <button onclick='assembleProg();'>Assemble</button>
        <button onclick='runProg();'>Run</button>
        <button onclick='stepProg();'>Step</button>

        <script src='computer.js'></script>
        
        <script>

            var computer = new Computer({
                bits: 32,
                registerCount: 10
            });

            function assembleProg() {
                let bin = computer.compile(document.getElementById('prog').value);
                computer.loadProgram(bin);
                document.getElementById('binary').value = Utils.bits2str(bin);
            }

            function stepProg() {
                computer.step();
            }

            function runProg() {
                computer.run();
            }

            /*
            var prog = `
AEQ 1789d
STA 0
AEQ 421d
ADD 0
OUT
HLT
            `;
            */

        </script>

    </body>
</html>